<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>内置规则</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_175">内置规则</h1>
<div class="book-content">
    <p class="calibre10">系统内置的验证规则如下：</p>
<h2 id="%E6%A0%BC%E5%BC%8F%E9%AA%8C%E8%AF%81%E7%B1%BB" class="calibre15">格式验证类</h2>
<blockquote class="info">
<h3 id="require" class="calibre17">require</h3>
</blockquote>
<p class="calibre10">验证某个字段必须，例如：</p>
<pre class="calibre21"><code class="calibre22">'name'=&gt;'require'</code></pre>
<blockquote class="info">
<h3 id="number+%E6%88%96%E8%80%85+integer" class="calibre17">number 或者 integer</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为数字（采用<code class="calibre7">filter_var</code>验证），例如：</p>
<pre class="calibre21"><code class="calibre22">'num'=&gt;'number'</code></pre>
<blockquote class="info">
<h3 id="float" class="calibre17">float</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为浮点数字（采用<code class="calibre7">filter_var</code>验证），例如：</p>
<pre class="calibre21"><code class="calibre22">'num'=&gt;'float'</code></pre>
<blockquote class="info">
<h3 id="boolean" class="calibre17">boolean</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为布尔值（采用<code class="calibre7">filter_var</code>验证），例如：</p>
<pre class="calibre21"><code class="calibre22">'num'=&gt;'boolean'</code></pre>
<blockquote class="info">
<h3 id="email" class="calibre17">email</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为email地址（采用<code class="calibre7">filter_var</code>验证），例如：</p>
<pre class="calibre21"><code class="calibre22">'email'=&gt;'email'</code></pre>
<blockquote class="info">
<h3 id="array" class="calibre17">array</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为数组，例如：</p>
<pre class="calibre21"><code class="calibre22">'info'=&gt;'array'</code></pre>
<blockquote class="info">
<h3 id="accepted" class="calibre17">accepted</h3>
</blockquote>
<p class="calibre10">验证某个字段是否为为 yes, on, 或是 1。这在确认"服务条款"是否同意时很有用，例如：</p>
<pre class="calibre21"><code class="calibre22">'accept'=&gt;'accepted'</code></pre>
<blockquote class="info">
<h3 id="date" class="calibre17">date</h3>
</blockquote>
<p class="calibre10">验证值是否为有效的日期，例如：</p>
<pre class="calibre21"><code class="calibre22">'date'=&gt;'date'</code></pre>
<p class="calibre10">会对日期值进行<code class="calibre7">strtotime</code>后进行判断。</p>
<blockquote class="info">
<h3 id="alpha" class="calibre17">alpha</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为字母，例如：</p>
<pre class="calibre21"><code class="calibre22">'name'=&gt;'alpha'</code></pre>
<blockquote class="info">
<h3 id="alphanum" class="calibre17">alphaNum</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为字母和数字，例如：</p>
<pre class="calibre21"><code class="calibre22">'name'=&gt;'alphaNum'</code></pre>
<blockquote class="info">
<h3 id="alphadash" class="calibre17">alphaDash</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为字母和数字，下划线<code class="calibre7">_</code>及破折号<code class="calibre7">-</code>，例如：</p>
<pre class="calibre21"><code class="calibre22">'name'=&gt;'alphaDash'</code></pre>
<blockquote class="info">
<h3 id="activeurl" class="calibre17">activeUrl</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为有效的域名或者IP，例如：</p>
<pre class="calibre21"><code class="calibre22">'host'=&gt;'activeUrl'</code></pre>
<blockquote class="info">
<h3 id="url" class="calibre17">url</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为有效的URL地址（采用<code class="calibre7">filter_var</code>验证），例如：</p>
<pre class="calibre21"><code class="calibre22">'url'=&gt;'url'</code></pre>
<blockquote class="info">
<h3 id="ip" class="calibre17">ip</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为有效的IP地址（采用<code class="calibre7">filter_var</code>验证），例如：</p>
<pre class="calibre21"><code class="calibre22">'ip'=&gt;'ip'</code></pre>
<p class="calibre10">支持验证ipv4和ipv6格式的IP地址。</p>
<blockquote class="info">
<h3 id="dateformat%3Aformat" class="calibre17">dateFormat:format</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否为指定格式的日期，例如：</p>
<pre class="calibre21"><code class="calibre22">'create_time'=&gt;'dateFormat:y-m-d'</code></pre>
<h2 id="%E9%95%BF%E5%BA%A6%E5%92%8C%E5%8C%BA%E9%97%B4%E9%AA%8C%E8%AF%81%E7%B1%BB" class="calibre15">长度和区间验证类</h2>
<blockquote class="info">
<h3 id="in" class="calibre17">in</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否在某个范围，例如：</p>
<pre class="calibre21"><code class="calibre22">'num'=&gt;'in:1,2,3'</code></pre>
<blockquote class="info">
<h3 id="notin" class="calibre17">notIn</h3>
</blockquote>
<p class="calibre10">验证某个字段的值不在某个范围，例如：</p>
<pre class="calibre21"><code class="calibre22">'num'=&gt;'notIn:1,2,3'</code></pre>
<blockquote class="info">
<h3 id="between" class="calibre17">between</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否在某个区间，例如：</p>
<pre class="calibre21"><code class="calibre22">'num'=&gt;'between:1,10'</code></pre>
<blockquote class="info">
<h3 id="notbetween" class="calibre17">notBetween</h3>
</blockquote>
<p class="calibre10">验证某个字段的值不在某个范围，例如：</p>
<pre class="calibre21"><code class="calibre22">'num'=&gt;'notBetween:1,10'</code></pre>
<blockquote class="info">
<h3 id="length%3Anum1%2Cnum2" class="calibre17">length:num1,num2</h3>
</blockquote>
<p class="calibre10">验证某个字段的值的长度是否在某个范围，例如：</p>
<pre class="calibre21"><code class="calibre22">'name'=&gt;'length:4,25'</code></pre>
<p class="calibre10">或者指定长度</p>
<pre class="calibre21"><code class="calibre22">'name'=&gt;'length:4'</code></pre>
<blockquote class="calibre5">
<p class="calibre14">如果验证的数据是数组，则判断数组的长度。<br class="calibre16"/>
如果验证的数据是File对象，则判断文件的大小。</p>
<h3 id="max%3Anumber" class="calibre17">max:number</h3>
</blockquote>
<p class="calibre10">验证某个字段的值的最大长度，例如：</p>
<pre class="calibre21"><code class="calibre22">'name'=&gt;'max:25'</code></pre>
<blockquote class="calibre5">
<p class="calibre14">如果验证的数据是数组，则判断数组的长度。<br class="calibre16"/>
如果验证的数据是File对象，则判断文件的大小。</p>
<h3 id="min%3Anumber" class="calibre17">min:number</h3>
</blockquote>
<p class="calibre10">验证某个字段的值的最小长度，例如：</p>
<pre class="calibre21"><code class="calibre22">'name'=&gt;'min:5'</code></pre>
<blockquote class="calibre5">
<p class="calibre14">如果验证的数据是数组，则判断数组的长度。<br class="calibre16"/>
如果验证的数据是File对象，则判断文件的大小。</p>
<h3 id="after%3A%E6%97%A5%E6%9C%9F" class="calibre17">after:日期</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否在某个日期之后，例如：</p>
<pre class="calibre21"><code class="calibre22">'begin_time' =&gt; 'after:2016-3-18',</code></pre>
<blockquote class="info">
<h3 id="before%3A%E6%97%A5%E6%9C%9F" class="calibre17">before:日期</h3>
</blockquote>
<p class="calibre10">验证某个字段的值是否在某个日期之前，例如：</p>
<pre class="calibre21"><code class="calibre22">'end_time'   =&gt; 'before:2016-10-01',</code></pre>
<blockquote class="info">
<h3 id="expire%3A%E5%BC%80%E5%A7%8B%E6%97%B6%E9%97%B4%2C%E7%BB%93%E6%9D%9F%E6%97%B6%E9%97%B4" class="calibre17">expire:开始时间,结束时间</h3>
</blockquote>
<p class="calibre10">验证当前操作（注意不是某个值）是否在某个有效日期之内，例如：</p>
<pre class="calibre21"><code class="calibre22">'expire_time'   =&gt; 'expire:2016-2-1,2016-10-01',</code></pre>
<blockquote class="info">
<h3 id="allowip%3Aallow1%2Callow2%2C..." class="calibre17">allowIp:allow1,allow2,...</h3>
</blockquote>
<p class="calibre10">验证当前请求的IP是否在某个范围，例如：</p>
<pre class="calibre21"><code class="calibre22">'name'   =&gt; 'allowIp:114.45.4.55',</code></pre>
<p class="calibre10">该规则可以用于某个后台的访问权限</p>
<blockquote class="info">
<h3 id="denyip%3Aallow1%2Callow2%2C..." class="calibre17">denyIp:allow1,allow2,...</h3>
</blockquote>
<p class="calibre10">验证当前请求的IP是否禁止访问，例如：</p>
<pre class="calibre21"><code class="calibre22">'name'   =&gt; 'denyIp:114.45.4.55',</code></pre>
<h2 id="%E5%AD%97%E6%AE%B5%E6%AF%94%E8%BE%83%E7%B1%BB" class="calibre15">字段比较类</h2>
<blockquote class="info">
<h3 id="confirm" class="calibre17">confirm</h3>
</blockquote>
<p class="calibre10">验证某个字段是否和另外一个字段的值一致，例如：</p>
<pre class="calibre21"><code class="calibre22">'repassword'=&gt;'require|confirm:password'</code></pre>
<p class="calibre10"><code class="calibre7">5.0.4+</code>版本开始，增加了字段自动匹配验证规则，如password和password_confirm是自动相互验证的，只需要使用</p>
<pre class="calibre21"><code class="calibre22">'password'=&gt;'require|confirm'</code></pre>
<p class="calibre10">会自动验证和password_confirm进行字段比较是否一致，反之亦然。</p>
<blockquote class="info">
<h3 id="different" class="calibre17">different</h3>
</blockquote>
<p class="calibre10">验证某个字段是否和另外一个字段的值不一致，例如：</p>
<pre class="calibre21"><code class="calibre22">'name'=&gt;'require|different:account'</code></pre>
<blockquote class="info">
<h3 id="egt+%E6%88%96%E8%80%85+%3E%3D" class="calibre17">egt 或者 &gt;=</h3>
</blockquote>
<p class="calibre10">验证是否大于等于某个值，例如：</p>
<pre class="calibre21"><code class="calibre22">'score'=&gt;'egt:60'
'num'=&gt;'&gt;=:100'</code></pre>
<blockquote class="info">
<h3 id="gt+%E6%88%96%E8%80%85+%3E" class="calibre17">gt 或者 &gt;</h3>
</blockquote>
<p class="calibre10">验证是否大于某个值，例如：</p>
<pre class="calibre21"><code class="calibre22">'score'=&gt;'gt:60'
'num'=&gt;'&gt;:100'</code></pre>
<blockquote class="info">
<h3 id="elt+%E6%88%96%E8%80%85+%3C%3D" class="calibre17">elt 或者 &lt;=</h3>
</blockquote>
<p class="calibre10">验证是否小于等于某个值，例如：</p>
<pre class="calibre21"><code class="calibre22">'score'=&gt;'elt:100'
'num'=&gt;'&lt;=:100'</code></pre>
<blockquote class="info">
<h3 id="lt+%E6%88%96%E8%80%85+%3C" class="calibre17">lt 或者 &lt;</h3>
</blockquote>
<p class="calibre10">验证是否小于某个值，例如：</p>
<pre class="calibre21"><code class="calibre22">'score'=&gt;'lt:100'
'num'=&gt;'&lt;:100'</code></pre>
<blockquote class="info">
<h3 id="eq+%E6%88%96%E8%80%85+%3D+%E6%88%96%E8%80%85+same" class="calibre17">eq 或者 = 或者 same</h3>
</blockquote>
<p class="calibre10">验证是否等于某个值，例如：</p>
<pre class="calibre21"><code class="calibre22">'score'=&gt;'eq:100'
'num'=&gt;'=:100'
'num'=&gt;'same:100'</code></pre>
<h2 id="filter%E9%AA%8C%E8%AF%81" class="calibre15">filter验证</h2>
<p class="calibre10">支持使用filter_var进行验证，例如：</p>
<pre class="calibre21"><code class="calibre22">'ip'=&gt;'filter:validate_ip'</code></pre>
<h2 id="%E6%AD%A3%E5%88%99%E9%AA%8C%E8%AF%81" class="calibre15">正则验证</h2>
<p class="calibre10">支持直接使用正则验证，例如：</p>
<pre class="calibre21"><code class="calibre22">'zip'=&gt;'\d{6}',
// 或者
'zip'=&gt;'regex:\d{6}',</code></pre>
<p class="calibre10">如果你的正则表达式中包含有<code class="calibre7">|</code>符号的话，必须使用数组方式定义。</p>
<pre class="calibre21"><code class="calibre22">'accepted'=&gt;['regex'=&gt;'/^(yes|on|1)$/i'],</code></pre>
<p class="calibre10">也可以实现预定义正则表达式后直接调用，例如：</p>
<h2 id="%E4%B8%8A%E4%BC%A0%E9%AA%8C%E8%AF%81" class="calibre15">上传验证</h2>
<blockquote class="info">
<h3 id="file" class="calibre17">file</h3>
</blockquote>
<p class="calibre10">验证是否是一个上传文件</p>
<blockquote class="info">
<h3 id="image%3Awidth%2Cheight%2Ctype" class="calibre17">image:width,height,type</h3>
</blockquote>
<p class="calibre10">验证是否是一个图像文件，width height和type都是可选，width和height必须同时定义。</p>
<blockquote class="info">
<h3 id="fileext%3A%E5%85%81%E8%AE%B8%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80" class="calibre17">fileExt:允许的文件后缀</h3>
</blockquote>
<p class="calibre10">验证上传文件后缀</p>
<blockquote class="info">
<h3 id="filemime%3A%E5%85%81%E8%AE%B8%E7%9A%84%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B" class="calibre17">fileMime:允许的文件类型</h3>
</blockquote>
<p class="calibre10">验证上传文件类型</p>
<blockquote class="info">
<h3 id="filesize%3A%E5%85%81%E8%AE%B8%E7%9A%84%E6%96%87%E4%BB%B6%E5%AD%97%E8%8A%82%E5%A4%A7%E5%B0%8F" class="calibre17">fileSize:允许的文件字节大小</h3>
</blockquote>
<p class="calibre10">验证上传文件大小</p>
<h2 id="%E8%A1%8C%E4%B8%BA%E9%AA%8C%E8%AF%81" class="calibre15">行为验证</h2>
<p class="calibre10">使用行为验证数据，例如：</p>
<pre class="calibre21"><code class="calibre22">'data'=&gt;'behavior:\app\index\behavior\Check'</code></pre>
<h2 id="%E5%85%B6%E5%AE%83%E9%AA%8C%E8%AF%81" class="calibre15">其它验证</h2>
<blockquote class="info">
<h3 id="unique%3Atable%2Cfield%2Cexcept%2Cpk" class="calibre17">unique:table,field,except,pk</h3>
</blockquote>
<table class="calibre25"><thead class="calibre26"><tr class="calibre27"><th class="calibre28">版本</th>
<th class="calibre28">调整功能</th>
</tr></thead><tbody class="calibre29"><tr class="calibre27"><td class="pcalibre1 calibre30">5.0.5</td>
<td class="calibre34 pcalibre1">支持指定完整模型类 并且默认会优先检测模型类是否存在 不存在则检测数据表</td>
</tr></tbody></table><p class="calibre10">验证当前请求的字段值是否为唯一的，例如：</p>
<pre class="calibre21"><code class="calibre22">// 表示验证name字段的值是否在user表（不包含前缀）中唯一
'name'   =&gt; 'unique:user',
// 验证其他字段
'name'   =&gt; 'unique:user,account',
// 排除某个主键值
'name'   =&gt; 'unique:user,account,10',
// 指定某个主键值排除
'name'   =&gt; 'unique:user,account,10,user_id',</code></pre>
<p class="calibre10">如果需要对复杂的条件验证唯一，可以使用下面的方式：</p>
<pre class="calibre21"><code class="calibre22">// 多个字段验证唯一验证条件
'name'   =&gt; 'unique:user,status^account',
// 复杂验证条件
'name'   =&gt; 'unique:user,status=1&amp;account='.$data['account'],</code></pre>
<blockquote class="info">
<h3 id="requireif%3Afield%2Cvalue" class="calibre17">requireIf:field,value</h3>
</blockquote>
<p class="calibre10">验证某个字段的值等于某个值的时候必须，例如：</p>
<pre class="calibre21"><code class="calibre22">// 当account的值等于1的时候 password必须
'password'=&gt;'requireIf:account,1'</code></pre>
<blockquote class="info">
<h3 id="requirewith%3Afield" class="calibre17">requireWith:field</h3>
</blockquote>
<p class="calibre10">验证某个字段有值的时候必须，例如：</p>
<pre class="calibre21"><code class="calibre22">// 当account有值的时候password字段必须
'password'=&gt;'requireWith:account'</code></pre>
</div>
	
</body></html>
