<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>只读字段</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_102">只读字段</h1>
<div class="book-content">
    <p class="calibre10">只读字段用来保护某些特殊的字段值不被更改，这个字段的值一旦写入，就无法更改。 要使用只读字段的功能，我们只需要在模型中定义<code class="calibre7">readonly</code>属性：</p>
<pre class="calibre21"><code class="calibre22">namespace app\index\model;

use think\Model;

class User extends Model
{
    protected $readonly = ['name','email'];
}</code></pre>
<p class="calibre10">例如，上面定义了当前模型的<code class="calibre7">name</code>和<code class="calibre7">email</code>字段为只读字段，不允许被更改。也就是说当执行更新方法之前会自动过滤掉只读字段的值，避免更新到数据库。</p>
<p class="calibre10">下面举个例子说明下：</p>
<pre class="calibre21"><code class="calibre22">$user = User::get(5);
 // 更改某些字段的值
$user-&gt;name = 'TOPThink';
$user-&gt;email = 'Topthink@gmail.com';
$user-&gt;address = '上海静安区';
 // 保存更改后的用户数据
$user-&gt;save();</code></pre>
<p class="calibre10">事实上，由于我们对<code class="calibre7">name</code>和<code class="calibre7">email</code>字段设置了只读，因此只有<code class="calibre7">address</code>字段的值被更新了，而<code class="calibre7">name</code>和<code class="calibre7">email</code>的值仍然还是更新之前的值。</p>
</div>
	
</body></html>
