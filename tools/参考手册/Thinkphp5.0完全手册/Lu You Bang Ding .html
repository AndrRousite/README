<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>路由绑定</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_39">路由绑定</h1>
<div class="book-content">
    <p class="calibre10">可以使用路由绑定简化URL或者路由规则的定义，绑定支持如下方式：</p>
<h2 id="%E7%BB%91%E5%AE%9A%E5%88%B0%E6%A8%A1%E5%9D%97%2F%E6%8E%A7%E5%88%B6%E5%99%A8%2F%E6%93%8D%E4%BD%9C" class="calibre15">绑定到模块/控制器/操作</h2>
<p class="calibre10">把当前的URL绑定到模块/控制器/操作，最多支持绑定到操作级别，例如在路由配置文件中添加：</p>
<pre class="calibre21"><code class="calibre22">// 绑定当前的URL到 index模块
Route::bind('index');
// 绑定当前的URL到 index模块的blog控制器
Route::bind('index/blog');
// 绑定当前的URL到 index模块的blog控制器的read操作
Route::bind('index/blog/read');</code></pre>
<p class="calibre10">该方式针对路由到模块/控制器/操作有效，假如我们绑定到了index模块的blog控制器，那么原来的访问URL从</p>
<pre class="calibre21"><code class="calibre22">http://serverName/index/blog/read/id/5</code></pre>
<p class="calibre10">可以简化成</p>
<pre class="calibre21"><code class="calibre22">http://serverName/read/id/5</code></pre>
<p class="calibre10">如果定义了路由</p>
<pre class="calibre21"><code class="calibre22">Route::get('index/blog/:id','index/blog/read');
</code></pre>
<p class="calibre10">那么访问URL就变成了</p>
<pre class="calibre21"><code class="calibre22">http://serverName/5</code></pre>
<h2 id="%E7%BB%91%E5%AE%9A%E5%88%B0%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4" class="calibre15">绑定到命名空间</h2>
<p class="calibre10">把当前的URL绑定到某个指定的命名空间，例如：</p>
<pre class="calibre21"><code class="calibre22">// 绑定命名空间
Route::bind('\app\index\controller','namespace');</code></pre>
<p class="calibre10">那么，我们接下来只需要通过</p>
<pre class="calibre21"><code class="calibre22">http://serverName/blog/read/id/5</code></pre>
<p class="calibre10">就可以直接访问 <code class="calibre7">\app\index\controller\Blog</code>类的read方法。</p>
<h2 id="%E7%BB%91%E5%AE%9A%E5%88%B0%E7%B1%BB" class="calibre15">绑定到类</h2>
<p class="calibre10">把当前的URL直接绑定到某个指定的类，例如：</p>
<pre class="calibre21"><code class="calibre22">// 绑定到类
Route::bind('\app\index\controller\Blog','class');</code></pre>
<p class="calibre10">那么，我们接下来只需要通过</p>
<pre class="calibre21"><code class="calibre22">http://serverName/read/id/5</code></pre>
<p class="calibre10">就可以直接访问 <code class="calibre7">\app\index\controller\Blog</code>类的read方法。</p>
<blockquote class="calibre5">
<p class="calibre14">注意：绑定到命名空间和类之后，不会进行模块的初始化工作。</p>
</blockquote>
<h2 id="%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%E7%BB%91%E5%AE%9A" class="calibre15">入口文件绑定</h2>
<p class="calibre10">如果我们需要给某个入口文件绑定模块，可以使用下面两种方式：</p>
<h3 id="%E5%B8%B8%E9%87%8F%E5%AE%9A%E4%B9%89" class="calibre17">常量定义</h3>
<p class="calibre10">只需要入口文件添加<code class="calibre7">BIND_MODULE</code>常量，即可把当前入口文件绑定到指定的模块或者控制器，例如：</p>
<pre class="calibre21"><code class="calibre22">// 定义应用目录
define('APP_PATH', __DIR__ . '/../application/');
// 绑定到index模块
define('BIND_MODULE','index');
// 加载框架引导文件
require __DIR__ . '/../thinkphp/start.php';</code></pre>
<h3 id="%E8%87%AA%E5%8A%A8%E5%85%A5%E5%8F%A3%E7%BB%91%E5%AE%9A" class="calibre17">自动入口绑定</h3>
<p class="calibre10">如果你的入口文件都是对应实际的模块名，那么可以使用入口文件自动绑定模块的功能，只需要在应用配置文件中添加：</p>
<pre class="calibre21"><code class="calibre22">// 开启入口文件自动绑定模块
'auto_bind_module'  =&gt;  true,</code></pre>
<p class="calibre10">当我们重新添加一个 <code class="calibre7">public/demo.php</code>入口文件，内容和<code class="calibre7">public/index.php</code>一样：</p>
<pre class="calibre21"><code class="calibre22">// 定义应用目录
define('APP_PATH', __DIR__ . '/../application/');
// 加载框架引导文件
require __DIR__ . '/../thinkphp/start.php';</code></pre>
<p class="calibre10">但其实访问 <code class="calibre7">demo.php</code>的时候，其实已经自动绑定到了<code class="calibre7">demo</code>模块。</p>
</div>
	
</body></html>
