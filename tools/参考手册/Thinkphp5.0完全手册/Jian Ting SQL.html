<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>监听SQL</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_87">监听SQL</h1>
<div class="book-content">
    <p class="calibre10">如果开启数据库的调试模式的话，你可以对数据库执行的任何SQL操作进行监听，使用如下方法：</p>
<pre class="calibre21"><code class="calibre22">Db::listen(function($sql, $time, $explain){
    // 记录SQL
    echo $sql. ' ['.$time.'s]';
    // 查看性能分析结果
    dump($explain);
});</code></pre>
<blockquote class="calibre5">
<p class="calibre14">默认如果没有注册任何监听操作的话，这些SQL执行会被根据不同的日志类型记录到日志中。</p>
</blockquote>
</div>
	
</body></html>
