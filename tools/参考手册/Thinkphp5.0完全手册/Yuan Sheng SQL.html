<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>原生查询</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_84">原生查询</h1>
<div class="book-content">
    <p class="calibre10"><code class="calibre7">Db</code>类支持原生<code class="calibre7">SQL</code>查询操作，主要包括下面两个方法：</p>
<h2 id="%60query%60%E6%96%B9%E6%B3%95" class="calibre15"><code class="calibre7">query</code>方法</h2>
<p class="calibre10"><code class="calibre7">query</code>方法用于执行<code class="calibre7">SQL</code>查询操作，如果数据非法或者查询错误则返回false，否则返回查询结果数据集（同<code class="calibre7">select</code>方法）。</p>
<p class="calibre10">使用示例：</p>
<pre class="calibre21"><code class="calibre22">Db::query("select * from think_user where status=1");</code></pre>
<blockquote class="calibre5">
<p class="calibre14">如果你当前采用了分布式数据库，并且设置了读写分离的话，query方法始终是在读服务器执行，因此query方法对应的都是读操作，而不管你的SQL语句是什么。</p>
</blockquote>
<h2 id="%60execute%60%E6%96%B9%E6%B3%95" class="calibre15"><code class="calibre7">execute</code>方法</h2>
<p class="calibre10">execute用于更新和写入数据的sql操作，如果数据非法或者查询错误则返回false ，否则返回影响的记录数。</p>
<p class="calibre10">使用示例：</p>
<pre class="calibre21"><code class="calibre22">Db::execute("update think_user set name='thinkphp' where status=1");</code></pre>
<blockquote class="calibre5">
<p class="calibre14">如果你当前采用了分布式数据库，并且设置了读写分离的话，execute方法始终是在写服务器执行，因此execute方法对应的都是写操作，而不管你的SQL语句是什么。</p>
</blockquote>
<h2 id="%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A" class="calibre15">参数绑定</h2>
<p class="calibre10">支持在原生查询的时候使用参数绑定，包括问号占位符或者命名占位符，例如：</p>
<pre class="calibre21"><code class="calibre22">Db::query("select * from think_user where id=? AND status=?",[8,1]);
// 命名绑定
Db::execute("update think_user set name=:name where status=:status",['name'=&gt;'thinkphp','status'=&gt;1]);</code></pre>
</div>
	
</body></html>
