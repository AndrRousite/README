<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>视图实例化</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_122">视图实例化</h1>
<div class="book-content">
    <p class="calibre10">视图功能由<code class="calibre7">\think\View</code>类配合视图驱动（模板引擎）类一起完成，目前的内置模板引擎包含PHP原生模板和Think模板引擎。</p>
<p class="calibre10">因为新版的控制器可以无需继承任何的基础类，因此在控制器中如何使用视图取决于你怎么定义控制器。</p>
<h2 id="%E7%BB%A7%E6%89%BF%60%5Cthink%5Ccontroller%60%E7%B1%BB" class="calibre15">继承<code class="calibre7">\think\Controller</code>类</h2>
<p class="calibre10">如果你的控制器继承了<code class="calibre7">\think\Controller</code>类的话，则无需自己实例化视图类，可以直接调用控制器基础类封装的相关视图类的方法。</p>
<pre class="calibre21"><code class="calibre22"> // 渲染模板输出
return $this-&gt;fetch('hello',['name'=&gt;'thinkphp']);</code></pre>
<table class="calibre25"><thead class="calibre26"><tr class="calibre27"><th class="calibre28">下面的方法可以直接被调用：</th>
<th class="calibre28">方法</th>
<th class="calibre28">说明</th>
</tr></thead><tbody class="calibre29"><tr class="calibre27"><td class="pcalibre1 calibre30">fetch</td>
<td class="calibre32 pcalibre1">渲染模板输出</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">display</td>
<td class="pcalibre1 calibre31">渲染内容输出</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">assign</td>
<td class="pcalibre1 calibre31">模板变量赋值</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">engine</td>
<td class="calibre33 pcalibre1">初始化模板引擎</td>
</tr></tbody></table><p class="calibre10">如果需要调用View类的其它方法，可以直接使用<code class="calibre7">$this-&gt;view</code> 对象：</p>
<h2 id="%E5%8A%A9%E6%89%8B%E5%87%BD%E6%95%B0-5" class="calibre15">助手函数</h2>
<p class="calibre10">如果你只是需要渲染模板输出的话，可以使用系统提供的助手函数<code class="calibre7">view</code>，可以完成相同的功能：</p>
<pre class="calibre21"><code class="calibre22">return view('hello',['name'=&gt;'thinkphp']);</code></pre>
<p class="calibre10">助手函数调用格式：</p>
<blockquote class="info">
<h3 id="view%28%27%5B%E6%A8%A1%E6%9D%BF%E6%96%87%E4%BB%B6%5D%27%5B%2C%27%E6%A8%A1%E6%9D%BF%E5%8F%98%E9%87%8F%EF%BC%88%E6%95%B0%E7%BB%84%EF%BC%89%27%5D%5B%2C%E6%A8%A1%E6%9D%BF%E6%9B%BF%E6%8D%A2%EF%BC%88%E6%95%B0%E7%BB%84%EF%BC%89%5D%29" class="calibre17">view('[模板文件]'[,'模板变量（数组）'][,模板替换（数组）])</h3>
</blockquote>
<p class="calibre10">无论你是否继承<code class="calibre7">think\Controller</code>类，助手函数都可以使用，也是最方便的一种。</p>
<h2 id="%E7%9B%B4%E6%8E%A5%E5%AE%9E%E4%BE%8B%E5%8C%96%E8%A7%86%E5%9B%BE%E7%B1%BB%EF%BC%88%E4%B8%8D%E5%BB%BA%E8%AE%AE%EF%BC%89" class="calibre15">直接实例化视图类（不建议）</h2>
<p class="calibre10">任何情况下，你都可以直接实例化视图类进行渲染模板。</p>
<pre class="calibre21"><code class="calibre22">// 实例化视图类
$view = new View();
 // 渲染模板输出 并赋值模板变量
return $view-&gt;fetch('hello',['name'=&gt;'thinkphp']);</code></pre>
<p class="calibre10">实例化视图类的时候，可以传入模板引擎相关配置参数，例如：</p>
<pre class="calibre21"><code class="calibre22">// 实例化视图类
$view = new View([
    'type'          =&gt; 'think',
    'view_path'     =&gt; '',
    'view_suffix'   =&gt; 'html',
    'view_depr'     =&gt; '/',
]);
 // 渲染模板输出 并赋值模板变量
return $view-&gt;fetch('hello',['name'=&gt;'thinkphp']);</code></pre>
<p class="calibre10">如果需要使用应用自己扩展的模板引擎驱动，可以使用：</p>
<pre class="calibre21"><code class="calibre22">// 实例化视图类
$view = new View([
    'type'          =&gt; '\org\template\Think',
    'view_path'     =&gt; '',
    'view_suffix'   =&gt; 'html',
    'view_depr'     =&gt; '/',
]);</code></pre>
<blockquote class="danger">
<p class="calibre14">如果实例化不当，很容易导致配置参数无效的情况。因此如果不是必要，不建议直接实例化<code class="calibre7">View</code>类进行操作。</p>
</blockquote>
</div>
	
</body></html>
