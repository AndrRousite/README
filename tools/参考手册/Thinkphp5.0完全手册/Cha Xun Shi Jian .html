<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>查询事件</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_85">查询事件</h1>
<div class="book-content">
    <h2 id="%E6%9F%A5%E8%AF%A2%E4%BA%8B%E4%BB%B6%EF%BC%88v5.0.4%2B%EF%BC%89" class="calibre15">查询事件（V5.0.4+）</h2>
<p class="calibre10">从<code class="calibre7">5.0.4+</code>版本开始，增加了数据库的CURD操作事件支持，包括：</p>
<table class="calibre25"><thead class="calibre26"><tr class="calibre27"><th class="calibre28">事件</th>
<th class="calibre28">描述</th>
</tr></thead><tbody class="calibre29"><tr class="calibre27"><td class="pcalibre1 calibre30">before_select</td>
<td class="calibre32 pcalibre1"><code class="calibre7">select</code>查询前回调</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">before_find</td>
<td class="pcalibre1 calibre31"><code class="calibre7">find</code>查询前回调</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">after_insert</td>
<td class="pcalibre1 calibre31"><code class="calibre7">insert</code>操作成功后回调</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">after_update</td>
<td class="pcalibre1 calibre31"><code class="calibre7">update</code>操作成功后回调</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">after_delete</td>
<td class="calibre33 pcalibre1"><code class="calibre7">delete</code>操作成功后回调</td>
</tr></tbody></table><p class="calibre10">查询事件仅支持<code class="calibre7">find</code>、<code class="calibre7">select</code>、<code class="calibre7">insert</code>、<code class="calibre7">update</code>和<code class="calibre7">delete</code>方法。</p>
<h2 id="%E6%B3%A8%E5%86%8C%E4%BA%8B%E4%BB%B6" class="calibre15">注册事件</h2>
<p class="calibre10">使用下面的方法注册数据库查询事件</p>
<pre class="calibre21"><code class="calibre22">Query::event('after_insert','callback');
Query::event('before_select',function($options,$query){
    // 事件处理
    return $result;
});</code></pre>
</div>
	
</body></html>
