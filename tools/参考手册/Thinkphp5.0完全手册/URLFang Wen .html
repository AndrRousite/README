<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>URL访问</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_10">URL访问</h1>
<div class="book-content">
    <h2 id="url%E8%AE%BE%E8%AE%A1" class="calibre15">URL设计</h2>
<p class="calibre10">ThinkPHP<code class="calibre7">5.0</code>在没有启用路由的情况下典型的URL访问规则是：</p>
<blockquote class="info">
<h4 id="http%3A%2F%2Fservername%2Findex.php%EF%BC%88%E6%88%96%E8%80%85%E5%85%B6%E5%AE%83%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%EF%BC%89%2F%E6%A8%A1%E5%9D%97%2F%E6%8E%A7%E5%88%B6%E5%99%A8%2F%E6%93%8D%E4%BD%9C%2F%5B%E5%8F%82%E6%95%B0%E5%90%8D%2F%E5%8F%82%E6%95%B0%E5%80%BC...%5D" class="calibre6"><a href="http://serverName/index.php%EF%BC%88%E6%88%96%E8%80%85%E5%85%B6%E5%AE%83%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%EF%BC%89/%E6%A8%A1%E5%9D%97/%E6%8E%A7%E5%88%B6%E5%99%A8/%E6%93%8D%E4%BD%9C/%5B%E5%8F%82%E6%95%B0%E5%90%8D/%E5%8F%82%E6%95%B0%E5%80%BC" class="pcalibre calibre13">http://serverName/index.php（或者其它应用入口文件）/模块/控制器/操作/[参数名/参数值</a>...]</h4>
</blockquote>
<p class="calibre10">支持切换到命令行访问，如果切换到命令行模式下面的访问规则是：</p>
<blockquote class="info">
<h4 id="%3Ephp.exe+index.php%28%E6%88%96%E8%80%85%E5%85%B6%E5%AE%83%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%EF%BC%89+%E6%A8%A1%E5%9D%97%2F%E6%8E%A7%E5%88%B6%E5%99%A8%2F%E6%93%8D%E4%BD%9C%2F%5B%E5%8F%82%E6%95%B0%E5%90%8D%2F%E5%8F%82%E6%95%B0%E5%80%BC...%5D" class="calibre6">&gt;php.exe index.php(或者其它应用入口文件） 模块/控制器/操作/[参数名/参数值...]</h4>
</blockquote>
<p class="calibre10">可以看到，无论是URL访问还是命令行访问，都采用<code class="calibre7">PATH_INFO</code>访问地址，其中<code class="calibre7">PATH_INFO</code>的分隔符是可以设置的。</p>
<p class="calibre10">注意：<code class="calibre7">5.0</code>取消了URL模式的概念，并且<strong class="calibre12">普通模式的URL访问不再支持</strong>，但参数可以支持普通方式传值，例如：</p>
<blockquote class="info">
<h4 id="%3Ephp.exe+index.php%28%E6%88%96%E8%80%85%E5%85%B6%E5%AE%83%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%EF%BC%89+%E6%A8%A1%E5%9D%97%2F%E6%8E%A7%E5%88%B6%E5%99%A8%2F%E6%93%8D%E4%BD%9C%3F%E5%8F%82%E6%95%B0%E5%90%8D%3D%E5%8F%82%E6%95%B0%E5%80%BC%26..." class="calibre6">&gt;php.exe index.php(或者其它应用入口文件） 模块/控制器/操作?参数名=参数值&amp;...</h4>
</blockquote>
<p class="calibre10">如果不支持PATHINFO的服务器可以使用兼容模式访问如下：</p>
<blockquote class="info">
<h4 id="http%3A%2F%2Fservername%2Findex.php%EF%BC%88%E6%88%96%E8%80%85%E5%85%B6%E5%AE%83%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%EF%BC%89%3Fs%3D%2F%E6%A8%A1%E5%9D%97%2F%E6%8E%A7%E5%88%B6%E5%99%A8%2F%E6%93%8D%E4%BD%9C%2F%5B%E5%8F%82%E6%95%B0%E5%90%8D%2F%E5%8F%82%E6%95%B0%E5%80%BC...%5D" class="calibre6"><a href="http://serverName/index.php%EF%BC%88%E6%88%96%E8%80%85%E5%85%B6%E5%AE%83%E5%BA%94%E7%94%A8%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6%EF%BC%89?s=/%E6%A8%A1%E5%9D%97/%E6%8E%A7%E5%88%B6%E5%99%A8/%E6%93%8D%E4%BD%9C/%5B%E5%8F%82%E6%95%B0%E5%90%8D/%E5%8F%82%E6%95%B0%E5%80%BC" class="pcalibre calibre13">http://serverName/index.php（或者其它应用入口文件）?s=/模块/控制器/操作/[参数名/参数值</a>...]</h4>
</blockquote>
<p class="calibre10">必要的时候，我们可以通过某种方式，省略URL里面的模块和控制器。</p>
<h2 id="url%E5%A4%A7%E5%B0%8F%E5%86%99" class="calibre15">URL大小写</h2>
<p class="calibre10">默认情况下，<code class="calibre7">URL</code>是不区分大小写的，也就是说 <code class="calibre7">URL</code>里面的<strong class="calibre12">模块/控制器/操作名</strong>会自动转换为小写，控制器在最后调用的时候会转换为驼峰法处理。</p>
<p class="calibre10">例如：</p>
<pre class="calibre21"><code class="calibre22">http://localhost/index.php/Index/Blog/read
// 和下面的访问是等效的
http://localhost/index.php/index/blog/read</code></pre>
<p class="calibre10">如果访问下面的地址</p>
<pre class="calibre21"><code class="calibre22">http://localhost/index.php/Index/BlogTest/read
// 和下面的访问是等效的
http://localhost/index.php/index/blogtest/read</code></pre>
<p class="calibre10">在这种URL不区分大小写情况下，如果要访问驼峰法的控制器类，则需要使用：</p>
<pre class="calibre21"><code class="calibre22">http://localhost/index.php/Index/blog_test/read</code></pre>
<blockquote class="calibre5">
<p class="calibre14">模块名和操作名会直接转换为小写处理。</p>
</blockquote>
<p class="calibre10">如果希望<code class="calibre7">URL</code>访问严格区分大小写，可以在应用配置文件中设置：</p>
<pre class="calibre21"><code class="calibre22">// 关闭URL中控制器和操作名的自动转换
'url_convert'    =&gt;  false,</code></pre>
<p class="calibre10">一旦关闭自动转换，URL地址中的控制器名就变成大小写敏感了，例如前面的访问地址就要写成：</p>
<pre class="calibre21"><code class="calibre22">http://localhost/index.php/Index/BlogTest/read</code></pre>
<p class="calibre10">但是下面的URL访问依然是有效的：</p>
<pre class="calibre21"><code class="calibre22">http://localhost/index.php/Index/blog_test/read</code></pre>
<p class="calibre10">下面的URL访问则无效：</p>
<pre class="calibre21"><code class="calibre22">http://localhost/index.php/Index/blogtest/read</code></pre>
<blockquote class="danger">
<p class="calibre14">需要注意：路由规则中定义的路由地址是按照控制器名的实际名称定义（区分大小写）。</p>
</blockquote>
<h2 id="%E9%9A%90%E8%97%8F%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6" class="calibre15">隐藏入口文件</h2>
<p class="calibre10">在ThinkPHP5.0中，出于优化的URL访问原则，还支持通过URL重写隐藏入口文件，下面以<code class="calibre7">Apache</code>为例说明隐藏应用入口文件index.php的设置。</p>
<p class="calibre10">下面是Apache的配置过程，可以参考下：<br class="calibre16"/>
1、<code class="calibre7">httpd.conf</code>配置文件中加载了<code class="calibre7">mod_rewrite.so</code>模块<br class="calibre16"/>
2、<code class="calibre7">AllowOverride None</code> 将<code class="calibre7">None</code>改为 <code class="calibre7">All</code><br class="calibre16"/>
3、在应用入口文件同级目录添加<code class="calibre7">.htaccess</code>文件，内容如下：</p>
<pre class="calibre21"><code class="calibre22">&lt;IfModule mod_rewrite.c&gt;
Options +FollowSymlinks -Multiviews
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php/$1 [QSA,PT,L]
&lt;/IfModule&gt;</code></pre>
<p class="calibre10">更多其它环境的隐藏入口文件参考后面的 <a href="177576" class="pcalibre calibre13">URL重写</a></p>
</div>
	
</body></html>
