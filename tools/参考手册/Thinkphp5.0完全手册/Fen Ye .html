<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>分页</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_188">分页</h1>
<div class="book-content">
    <h2 id="%E5%88%86%E9%A1%B5%E5%AE%9E%E7%8E%B0" class="calibre15">分页实现</h2>
<table class="calibre25"><thead class="calibre26"><tr class="calibre27"><th class="calibre28">版本</th>
<th class="calibre28">新增功能</th>
</tr></thead><tbody class="calibre29"><tr class="calibre27"><td class="pcalibre1 calibre30">5.0.5</td>
<td class="calibre32 pcalibre1">分页方法返回<code class="calibre7">think\Paginator</code>对象（用法不变）</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">5.0.1</td>
<td class="calibre33 pcalibre1">支持第二个参数直接传入总记录数</td>
</tr></tbody></table><p class="calibre10"><code class="calibre7">ThinkPHP5.0</code>内置了分页实现，要给数据添加分页输出功能在<code class="calibre7">5.0</code>变得非常简单，可以直接在<code class="calibre7">Db</code>类查询的时候调用<code class="calibre7">paginate</code>方法：</p>
<pre class="calibre21"><code class="calibre22">// 查询状态为1的用户数据 并且每页显示10条数据
$list = Db::name('user')-&gt;where('status',1)-&gt;paginate(10);
// 把分页数据赋值给模板变量list
$this-&gt;assign('list', $list);
// 渲染模板输出
return $this-&gt;fetch();</code></pre>
<p class="calibre10">也可以改成模型的分页查询代码：</p>
<pre class="calibre21"><code class="calibre22">// 查询状态为1的用户数据 并且每页显示10条数据
$list = User::where('status',1)-&gt;paginate(10);
// 把分页数据赋值给模板变量list
$this-&gt;assign('list', $list);
// 渲染模板输出
return $this-&gt;fetch();</code></pre>
<p class="calibre10">模板文件中分页输出代码如下：</p>
<pre class="calibre21"><code class="calibre22">&lt;div&gt;
&lt;ul&gt;
{volist name='list' id='user'}
    &lt;li&gt; {$user.nickname}&lt;/li&gt;
{/volist}
&lt;/ul&gt;
&lt;/div&gt;
{$list-&gt;render()}</code></pre>
<p class="calibre10">也可以单独赋值分页输出的模板变量</p>
<pre class="calibre21"><code class="calibre22">// 查询状态为1的用户数据 并且每页显示10条数据
$list = User::where('status',1)-&gt;paginate(10);
// 获取分页显示
$page = $list-&gt;render();
// 模板变量赋值
$this-&gt;assign('list', $list);
$this-&gt;assign('page', $page);
// 渲染模板输出
return $this-&gt;fetch();</code></pre>
<p class="calibre10">模板文件中分页输出代码如下：</p>
<pre class="calibre21"><code class="calibre22">&lt;div&gt;
&lt;ul&gt;
{volist name='list' id='user'}
    &lt;li&gt; {$user.nickname}&lt;/li&gt;
{/volist}
&lt;/ul&gt;
&lt;/div&gt;
{$page}</code></pre>
<p class="calibre10">默认情况下，生成的分页输出是完整分页功能，带总分页数据和上下页码，分页样式只需要通过样式修改即可，完整分页默认生成的分页输出代码为：</p>
<pre class="calibre21"><code class="calibre22">&lt;ul class="pagination"&gt;
&lt;li&gt;&lt;a href="?page=1"&gt;&amp;laquo;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="?page=1"&gt;1&lt;/a&gt;&lt;/li&gt;
&lt;li class="active"&gt;&lt;span&gt;2&lt;/span&gt;&lt;/li&gt;
&lt;li class="disabled"&gt;&lt;span&gt;&amp;raquo;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;</code></pre>
<h3 id="%E4%BC%A0%E5%85%A5%E6%80%BB%E8%AE%B0%E5%BD%95%E6%95%B0%EF%BC%88+%60v5.0.1%60%EF%BC%89" class="calibre17">传入总记录数（ <code class="calibre7">V5.0.1</code>）</h3>
<p class="calibre10"><code class="calibre7">V5.0.1</code>版本开始，支持传入总记录数而不会自动进行总数计算，例如：</p>
<pre class="calibre21"><code class="calibre22">// 查询状态为1的用户数据 并且每页显示10条数据 总记录数为1000
$list = User::where('status',1)-&gt;paginate(10,1000);
// 获取分页显示
$page = $list-&gt;render();
// 模板变量赋值
$this-&gt;assign('list', $list);
$this-&gt;assign('page', $page);
// 渲染模板输出
return $this-&gt;fetch();</code></pre>
<h2 id="%E7%AE%80%E6%B4%81%E5%88%86%E9%A1%B5" class="calibre15">简洁分页</h2>
<p class="calibre10">如果你仅仅需要输出一个 仅仅只有上下页的分页输出，可以使用下面的简洁分页代码：</p>
<pre class="calibre21"><code class="calibre22">// 查询状态为1的用户数据 并且每页显示10条数据
$list = User::where('status',1)-&gt;paginate(10,true);
// 把分页数据赋值给模板变量list
$this-&gt;assign('list', $list);
// 渲染模板输出
return $this-&gt;fetch();</code></pre>
<p class="calibre10">简洁分页模式的输出代码为：</p>
<pre class="calibre21"><code class="calibre22">&lt;ul class="pager"&gt;
&lt;li&gt;&lt;a href="?page=1"&gt;&amp;laquo;&lt;/a&gt;&lt;/li&gt;
&lt;li class="disabled"&gt;&lt;span&gt;&amp;raquo;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;</code></pre>
<blockquote class="calibre5">
<p class="calibre14">由于简洁分页模式不需要查询总数据数，因此可以提高查询性能。</p>
</blockquote>
<h2 id="%E5%88%86%E9%A1%B5%E5%8F%82%E6%95%B0" class="calibre15">分页参数</h2>
<table class="calibre25"><thead class="calibre26"><tr class="calibre27"><th class="calibre28">主要的分页参数如下：</th>
<th class="calibre28">参数</th>
<th class="calibre28">描述</th>
</tr></thead><tbody class="calibre29"><tr class="calibre27"><td class="pcalibre1 calibre30">list_rows</td>
<td class="calibre32 pcalibre1">每页数量</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">page</td>
<td class="pcalibre1 calibre31">当前页</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">path</td>
<td class="pcalibre1 calibre31">url路径</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">query</td>
<td class="pcalibre1 calibre31">url额外参数</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">fragment</td>
<td class="pcalibre1 calibre31">url锚点</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">var_page</td>
<td class="pcalibre1 calibre31">分页变量</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">type</td>
<td class="calibre33 pcalibre1">分页类名</td>
</tr></tbody></table><p class="calibre10">分页参数的设置方式有两种，第一种是在配置文件中定义，例如：</p>
<pre class="calibre21"><code class="calibre22">//分页配置
'paginate'               =&gt; [
    'type'     =&gt; 'bootstrap',
    'var_page' =&gt; 'page',
],</code></pre>
<p class="calibre10">type属性支持命名空间，例如：</p>
<pre class="calibre21"><code class="calibre22">//分页配置
'paginate'               =&gt; [
    'type'     =&gt; '\org\page\bootstrap',
    'var_page' =&gt; 'page',
],</code></pre>
<p class="calibre10">也可以在调用分页方法的时候传入，例如：</p>
<pre class="calibre21"><code class="calibre22">$list = Db::name('user')-&gt;where('status',1)-&gt;paginate(10,true,[
    'type'     =&gt; 'bootstrap',
    'var_page' =&gt; 'page',
]);</code></pre>
</div>
	
</body></html>
