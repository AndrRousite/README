<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>查询语法</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_77">查询语法</h1>
<div class="book-content">
    <h1 id="%E6%9F%A5%E8%AF%A2%E8%A1%A8%E8%BE%BE%E5%BC%8F" class="calibre9">查询表达式</h1>
<p class="calibre10">查询表达式支持大部分的SQL查询语法，也是<code class="calibre7">ThinkPHP</code>查询语言的精髓，查询表达式的使用格式：</p>
<pre class="calibre21"><code class="calibre22">where('字段名','表达式','查询条件');
whereOr('字段名','表达式','查询条件');</code></pre>
<table class="calibre25"><thead class="calibre26"><tr class="calibre27"><th class="calibre28">版本</th>
<th class="calibre28">新增功能</th>
</tr></thead><tbody class="calibre29"><tr class="calibre27"><td class="pcalibre1 calibre30">5.0.4</td>
<td class="calibre34 pcalibre1">支持对同一个字段多次调用查询方法</td>
</tr></tbody></table><p class="calibre10">表达式不分大小写，支持的查询表达式有下面几种，分别表示的含义是：</p>
<table class="calibre25"><thead class="calibre26"><tr class="calibre27"><th class="calibre28">表达式</th>
<th class="calibre28">含义</th>
</tr></thead><tbody class="calibre29"><tr class="calibre27"><td class="pcalibre1 calibre30">EQ、=</td>
<td class="calibre32 pcalibre1">等于（=）</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">NEQ、</td>
<td class="pcalibre1 calibre31">不等于（）</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">GT、&gt;</td>
<td class="pcalibre1 calibre31">大于（&gt;）</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">EGT、&gt;=</td>
<td class="pcalibre1 calibre31">大于等于（&gt;=）</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">LT、&lt;</td>
<td class="pcalibre1 calibre31">小于（&lt;）</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">ELT、&lt;=</td>
<td class="pcalibre1 calibre31">小于等于（&lt;=）</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">LIKE</td>
<td class="pcalibre1 calibre31">模糊查询</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">[NOT] BETWEEN</td>
<td class="pcalibre1 calibre31">（不在）区间查询</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">[NOT] IN</td>
<td class="pcalibre1 calibre31">（不在）IN 查询</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">[NOT] NULL</td>
<td class="pcalibre1 calibre31">查询字段是否（不）是NULL</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">[NOT] EXISTS</td>
<td class="pcalibre1 calibre31">EXISTS查询</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">EXP</td>
<td class="pcalibre1 calibre31">表达式查询，支持SQL语法</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">&gt; time</td>
<td class="pcalibre1 calibre31">时间比较</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">&lt; time</td>
<td class="pcalibre1 calibre31">时间比较</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">between time</td>
<td class="pcalibre1 calibre31">时间比较</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">notbetween time</td>
<td class="calibre33 pcalibre1">时间比较</td>
</tr></tbody></table><p class="calibre10">表达式查询的用法示例如下：</p>
<h2 id="eq+%EF%BC%9A%E7%AD%89%E4%BA%8E%EF%BC%88%3D%EF%BC%89" class="calibre15">EQ ：等于（=）</h2>
<p class="calibre10">例如：</p>
<pre class="calibre21"><code class="calibre22">where('id','eq',100);
where('id','=',100);</code></pre>
<p class="calibre10">和下面的查询等效</p>
<pre class="calibre21"><code class="calibre22">where('id',100);</code></pre>
<p class="calibre10">表示的查询条件就是 <code class="calibre7">id = 100</code></p>
<h2 id="neq%EF%BC%9A+%E4%B8%8D%E7%AD%89%E4%BA%8E%EF%BC%88%3C%3E%EF%BC%89" class="calibre15">NEQ： 不等于（）</h2>
<p class="calibre10">例如：</p>
<pre class="calibre21"><code class="calibre22">where('id','neq',100);
where('id','&lt;&gt;',100);</code></pre>
<p class="calibre10">表示的查询条件就是 <code class="calibre7">id &lt;&gt; 100</code></p>
<h2 id="gt%EF%BC%9A%E5%A4%A7%E4%BA%8E%EF%BC%88%3E%EF%BC%89" class="calibre15">GT：大于（&gt;）</h2>
<p class="calibre10">例如：</p>
<pre class="calibre21"><code class="calibre22">where('id','gt',100);
where('id','&gt;',100);</code></pre>
<p class="calibre10">表示的查询条件就是 <code class="calibre7">id &gt; 100</code></p>
<h2 id="egt%EF%BC%9A%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8E%EF%BC%88%3E%3D%EF%BC%89" class="calibre15">EGT：大于等于（&gt;=）</h2>
<p class="calibre10">例如：</p>
<pre class="calibre21"><code class="calibre22">where('id','egt',100);
where('id','&gt;=',100);</code></pre>
<p class="calibre10">表示的查询条件就是 <code class="calibre7">id &gt;= 100</code></p>
<h2 id="lt%EF%BC%9A%E5%B0%8F%E4%BA%8E%EF%BC%88%3C%EF%BC%89" class="calibre15">LT：小于（&lt;）</h2>
<p class="calibre10">例如：</p>
<pre class="calibre21"><code class="calibre22">where('id','lt',100);
where('id','&lt;',100);</code></pre>
<p class="calibre10">表示的查询条件就是 <code class="calibre7">id &lt; 100</code></p>
<h2 id="elt%EF%BC%9A+%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8E%EF%BC%88%3C%3D%EF%BC%89" class="calibre15">ELT： 小于等于（&lt;=）</h2>
<p class="calibre10">例如：</p>
<pre class="calibre21"><code class="calibre22">where('id','elt',100);
where('id','&lt;=',100);</code></pre>
<p class="calibre10">表示的查询条件就是 <code class="calibre7">id &lt;= 100</code></p>
<h2 id="%5Bnot%5D+like%EF%BC%9A+%E5%90%8Csql%E7%9A%84like" class="calibre15">[NOT] LIKE： 同sql的LIKE</h2>
<p class="calibre10">例如：</p>
<pre class="calibre21"><code class="calibre22">where('name','like','thinkphp%');</code></pre>
<p class="calibre10">查询条件就变成 <code class="calibre7">name like 'thinkphp%'</code> </p>
<p class="calibre10"><code class="calibre7">V5.0.5+</code>版本开始，like查询支持使用数组</p>
<pre class="calibre21"><code class="calibre22">where('name','like',['%think','php%'],'OR');
~~~``

## [NOT] BETWEEN ：同sql的[not] between

查询条件支持字符串或者数组，例如：
</code></pre>
<p class="calibre10">where('id','between','1,8');</p>
<pre class="calibre21"><code class="calibre22">
和下面的等效：
</code></pre>
<p class="calibre10">where('id','between',[1,8]);</p>
<pre class="calibre21"><code class="calibre22">
查询条件就变成 `id BETWEEN 1 AND 8`

## [NOT] IN： 同sql的[not] in

查询条件支持字符串或者数组，例如：
</code></pre>
<p class="calibre10">where('id','not in','1,5,8');</p>
<pre class="calibre21"><code class="calibre22">
和下面的等效：
</code></pre>
<p class="calibre10">where('id','not in',[1,5,8]);</p>
<pre class="calibre21"><code class="calibre22">
查询条件就变成 `id NOT IN (1,5, 8)`

&gt;[info] `[NOT] IN`查询支持使用闭包方式

## [NOT] NULL ：

查询字段是否（不）是`Null`，例如：
</code></pre>
<p class="calibre10">where('name', null);<br class="calibre16"/>
where('title','null');<br class="calibre16"/>
where('name','not null');</p>
<pre class="calibre21"><code class="calibre22">
如果你需要查询一个字段的值为字符串`null`或者`not null`，应该使用：</code></pre>
<p class="calibre10">where('title','=', 'null');<br class="calibre16"/>
where('name','=', 'not null');</p>
<pre class="calibre21"><code class="calibre22">
## EXP：表达式

支持更复杂的查询情况 例如：
</code></pre>
<p class="calibre10">where('id','in','1,3,8');</p>
<pre class="calibre21"><code class="calibre22">
可以改成：
</code></pre>
<p class="calibre10">where('id','exp',' IN (1,3,8) ');</p>
<pre class="calibre21"><code class="calibre22">

`exp`查询的条件不会被当成字符串，所以后面的查询条件可以使用任何SQL支持的语法，包括使用函数和字段名称。</code></pre>
</div>
	
</body></html>
