<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>查询方法</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_76">查询方法</h1>
<div class="book-content">
    <h2 id="%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%B3%95" class="calibre15">条件查询方法</h2>
<h3 id="%60where%60%E6%96%B9%E6%B3%95" class="calibre17"><code class="calibre7">where</code>方法</h3>
<p class="calibre10">可以使用<code class="calibre7">where</code>方法进行<code class="calibre7">AND</code>条件查询：</p>
<pre class="calibre21"><code class="calibre22">Db::table('think_user')
    -&gt;where('name','like','%thinkphp')
    -&gt;where('status',1)
    -&gt;find();</code></pre>
<p class="calibre10">多字段相同条件的<code class="calibre7">AND</code>查询可以简化为如下方式：</p>
<pre class="calibre21"><code class="calibre22">Db::table('think_user')
    -&gt;where('name&amp;title','like','%thinkphp')
    -&gt;find();</code></pre>
<h3 id="%60whereor%60%E6%96%B9%E6%B3%95" class="calibre17"><code class="calibre7">whereOr</code>方法</h3>
<p class="calibre10">使用<code class="calibre7">whereOr</code>方法进行<code class="calibre7">OR</code>查询：</p>
<pre class="calibre21"><code class="calibre22">Db::table('think_user')
    -&gt;where('name','like','%thinkphp')
    -&gt;whereOr('title','like','%thinkphp')
    -&gt;find();</code></pre>
<p class="calibre10">多字段相同条件的<code class="calibre7">OR</code>查询可以简化为如下方式：</p>
<pre class="calibre21"><code class="calibre22">Db::table('think_user')
    -&gt;where('name|title','like','%thinkphp')
    -&gt;find();</code></pre>
<h3 id="%E6%B7%B7%E5%90%88%E6%9F%A5%E8%AF%A2" class="calibre17">混合查询</h3>
<p class="calibre10">where方法和whereOr方法在复杂的查询条件中经常需要配合一起混合使用，下面举个例子：</p>
<pre class="calibre21"><code class="calibre22">$result = Db::table('think_user')-&gt;where(function ($query) {
    $query-&gt;where('id', 1)-&gt;whereor('id', 2);
})-&gt;whereOr(function ($query) {
    $query-&gt;where('name', 'like', 'think')-&gt;whereOr('name', 'like', 'thinkphp');
})-&gt;select();</code></pre>
<p class="calibre10">生成的sql语句类似于下面：</p>
<pre class="calibre21"><code class="calibre22">SELECT * FROM `think_user` WHERE  (  `id` = 1 OR `id` = 2 ) OR (  `name` LIKE 'think' OR `name` LIKE 'thinkphp' )</code></pre>
<blockquote class="calibre5">
<p class="calibre14">注意闭包查询里面的顺序，而且第一个查询方法用where或者whereOr是没有区别的。</p>
</blockquote>
<h3 id="%60gettableinfo%60%E6%96%B9%E6%B3%95" class="calibre17"><code class="calibre7">getTableInfo</code>方法</h3>
<p class="calibre10">使用getTableInfo可以获取表信息，信息类型 包括 fields,type,bind,pk，以数组的形式展示，可以指定某个信息进行获取</p>
<pre class="calibre21"><code class="calibre22">// 获取`think_user`表所有信息
Db::getTableInfo('think_user');
// 获取`think_user`表所有字段
Db::getTableInfo('think_user', 'fields');
// 获取`think_user`表所有字段的类型
Db::getTableInfo('think_user', 'type');
// 获取`think_user`表的主键
Db::getTableInfo('think_user', 'pk');</code></pre>
</div>
	
</body></html>
