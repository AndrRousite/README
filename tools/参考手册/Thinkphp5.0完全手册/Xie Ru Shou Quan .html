<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>写入授权</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_157">写入授权</h1>
<div class="book-content">
    <p class="calibre10">5.0的日志功能支持写入授权，我们可以设置某个请求的日志授权Key，然后设置允许授权写入的配置<code class="calibre7">Key</code>，实现个别用户日志记录的功能，从而提高高负载下面的日志记录性能。</p>
<p class="calibre10">首先需要在应用配置文件或者应用公共文件中添加当前访问的授权Key定义，例如：</p>
<pre class="calibre21"><code class="calibre22">// 设置IP为授权Key
Log::key(Request::instance()-&gt;ip());</code></pre>
<p class="calibre10">然后在日志配置参数中增加<code class="calibre7">allow_key</code>参数，如下：</p>
<pre class="calibre21"><code class="calibre22">'log'   =&gt;  [
    // 日志类型为File
    'type'      =&gt;  'File',
    // 授权只有202.12.36.89 才能记录日志
    'allow_key' =&gt;  ['202.12.36.89'],
]</code></pre>
</div>
	
</body></html>
