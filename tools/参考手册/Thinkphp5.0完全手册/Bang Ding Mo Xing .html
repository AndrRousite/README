<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>绑定模型</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_40">绑定模型</h1>
<div class="book-content">
    <h2 id="%E6%A8%A1%E5%9E%8B%E7%BB%91%E5%AE%9A%EF%BC%88%60v5.0.1%60%EF%BC%89" class="calibre15">模型绑定（<code class="calibre7">V5.0.1</code>）</h2>
<p class="calibre10">路由规则和分组支持绑定模型数据，例如：</p>
<pre class="calibre21"><code class="calibre22">Route::rule('hello/:id','index/index/hello','GET',[
    'ext'                   =&gt;  'html',
    'bind_model'    =&gt;  [
        'user'  =&gt;  '\app\index\model\User',
    ],
]);</code></pre>
<p class="calibre10">会自动给当前路由绑定 <code class="calibre7">id</code>为 当前路由变量值的<code class="calibre7">User</code>模型数据。</p>
<p class="calibre10">可以定义模型数据的查询条件，例如：</p>
<pre class="calibre21"><code class="calibre22">Route::rule('hello/:name/:id','index/index/hello','GET',[
    'ext'                   =&gt;  'html',
    'bind_model'    =&gt;  [
        'user'  =&gt;  ['\app\index\model\User','id&amp;name']
    ],
]);</code></pre>
<p class="calibre10">表示查询<code class="calibre7">id</code>和<code class="calibre7">name</code>的值等于当前路由变量的模型数据。</p>
<p class="calibre10">也可以使用闭包来返回模型对象数据</p>
<pre class="calibre21"><code class="calibre22">Route::rule('hello/:id','index/index/hello','GET',[
    'ext'                   =&gt;  'html',
    'bind_model'    =&gt;  [
        'user'  =&gt;  function($param){
            $model = new \app\index\model\User;
            return $model-&gt;where($param)-&gt;find();
        }
    ],
]);</code></pre>
<p class="calibre10">闭包函数的参数就是当前请求的URL变量信息。</p>
<p class="calibre10">在控制器中可以通过下面的代码或者使用依赖注入获取：</p>
<pre class="calibre21"><code class="calibre22">request()-&gt;user;</code></pre>
<blockquote class="calibre5">
<p class="calibre14">绑定的模型可以直接在控制器的架构方法或者操作方法中自动注入，具体可以参考请求章节的依赖注入。</p>
</blockquote>
</div>
	
</body></html>
