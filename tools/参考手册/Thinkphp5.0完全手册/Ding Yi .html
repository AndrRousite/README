<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>定义</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_92">定义</h1>
<div class="book-content">
    <table class="calibre25"><thead class="calibre26"><tr class="calibre27"><th class="calibre28">版本</th>
<th class="calibre28">调整功能</th>
</tr></thead><tbody class="calibre29"><tr class="calibre27"><td class="pcalibre1 calibre30">5.0.5</td>
<td class="calibre34 pcalibre1"><code class="calibre7">model</code>或者<code class="calibre7">Loader::model</code>方法支持传入完整的模型类名</td>
</tr></tbody></table><h2 id="%E6%A8%A1%E5%9E%8B%E5%AE%9A%E4%B9%89" class="calibre15">模型定义</h2>
<p class="calibre10">定义一个User模型类：</p>
<pre class="calibre21"><code class="calibre22">namespace app\index\model;

use think\Model;

class User extends Model
{
}</code></pre>
<p class="calibre10">默认主键为自动识别，如果需要指定，可以设置属性：</p>
<pre class="calibre21"><code class="calibre22">namespace app\index\model;

use think\Model;

class User extends Model
{
    protected $pk = 'uid';
}</code></pre>
<p class="calibre10">模型会自动对应数据表，模型类的命名规则是除去表前缀的数据表名称，采用驼峰法命名，并且首字母大写，例如：</p>
<table class="calibre25"><thead class="calibre26"><tr class="calibre27"><th class="calibre28">模型名</th>
<th class="calibre28">约定对应数据表（假设数据库的前缀定义是 think_）</th>
</tr></thead><tbody class="calibre29"><tr class="calibre27"><td class="pcalibre1 calibre30">User</td>
<td class="calibre32 pcalibre1">think_user</td>
</tr><tr class="calibre27"><td class="pcalibre1 calibre31">UserType</td>
<td class="calibre33 pcalibre1">think_user_type</td>
</tr></tbody></table><p class="calibre10">如果你的规则和上面的系统约定不符合，那么需要设置Model类的数据表名称属性，以确保能够找到对应的数据表。</p>
<h2 id="%E8%AE%BE%E7%BD%AE%E6%95%B0%E6%8D%AE%E8%A1%A8" class="calibre15">设置数据表</h2>
<p class="calibre10">如果你想指定数据表甚至数据库连接的话，可以使用：</p>
<pre class="calibre21"><code class="calibre22">namespace app\index\model;

class User extends \think\Model
{
    // 设置当前模型对应的完整数据表名称
    protected $table = 'think_user';

    // 设置当前模型的数据库连接
    protected $connection = [
        // 数据库类型
        'type'        =&gt; 'mysql',
        // 服务器地址
        'hostname'    =&gt; '127.0.0.1',
        // 数据库名
        'database'    =&gt; 'thinkphp',
        // 数据库用户名
        'username'    =&gt; 'root',
        // 数据库密码
        'password'    =&gt; '',
        // 数据库编码默认采用utf8
        'charset'     =&gt; 'utf8',
        // 数据库表前缀
        'prefix'      =&gt; 'think_',
        // 数据库调试模式
        'debug'       =&gt; false,
    ];
}</code></pre>
<p class="calibre10">和连接数据库的参数一样，<code class="calibre7">connection</code>属性的值也可以设置为数据库的配置参数。</p>
<blockquote class="calibre5">
<p class="calibre14">5.0不支持单独设置当前模型的数据表前缀。</p>
</blockquote>
<h2 id="%E6%A8%A1%E5%9E%8B%E8%B0%83%E7%94%A8" class="calibre15">模型调用</h2>
<p class="calibre10">模型类可以使用静态调用或者实例化调用两种方式，例如：</p>
<pre class="calibre21"><code class="calibre22">// 静态调用
$user = User::get(1);
$user-&gt;name = 'thinkphp';
$user-&gt;save();

// 实例化模型
$user = new User;
$user-&gt;name= 'thinkphp';
$user-&gt;save();

// 使用 Loader 类实例化（单例）
$user = Loader::model('User');

// 或者使用助手函数`model`
$user = model('User');
$user-&gt;name= 'thinkphp';
$user-&gt;save();</code></pre>
<blockquote class="info">
<p class="calibre14">实例化模型类主要用于调用模型的自定义方法，更多用法参考后面的章节内容。</p>
</blockquote>
</div>
	
</body></html>
