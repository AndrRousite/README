<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>空操作</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_48">空操作</h1>
<div class="book-content">
    <p class="calibre10">空操作是指系统在找不到指定的操作方法的时候，会定位到空操作（<code class="calibre7">_empty</code>）方法来执行，利用这个机制，我们可以实现错误页面和一些URL的优化。<br class="calibre16"/>
例如，下面我们用空操作功能来实现一个城市切换的功能。</p>
<p class="calibre10">我们只需要给City控制器类定义一个<code class="calibre7">_empty</code> （空操作）方法：</p>
<pre class="calibre21"><code class="calibre22">&lt;?php
namespace app\index\controller;

class City 
{
    public function _empty($name)
    {
        //把所有城市的操作解析到city方法
        return $this-&gt;showCity($name);
    }

    //注意 showCity方法 本身是 protected 方法
    protected function showCity($name)
    {
        //和$name这个城市相关的处理
         return '当前城市' . $name;
    }
}</code></pre>
<p class="calibre10">接下来，我们就可以在浏览器里面输入</p>
<pre class="calibre21"><code class="calibre22">http://serverName/index/city/beijing/
http://serverName/index/city/shanghai/
http://serverName/index/city/shenzhen/</code></pre>
<p class="calibre10">由于City并没有定义beijing、shanghai或者shenzhen操作方法，因此系统会定位到空操作方法 _empty中去解析，_empty方法的参数就是当前URL里面的操作名，因此会看到依次输出的结果是：</p>
<pre class="calibre21"><code class="calibre22">当前城市:beijing
当前城市:shanghai
当前城市:shenzhen</code></pre>
<blockquote class="danger">
<p class="calibre14"><code class="calibre7">V5.0.2+</code>开始，空操作方法不需要任何参数，如果要获取当前的操作方法名，直接调用当前请求对象来获取，你也可以使用依赖注入（参考请求章节的依赖注入）</p>
</blockquote>
</div>
	
</body></html>
