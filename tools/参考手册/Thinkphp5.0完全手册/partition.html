<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>partition</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title">partition</h1>
<div class="book-content">
    <p class="calibre10">partition 方法用于是数据库水平分表</p>
<pre class="calibre21"><code class="calibre22">partition($data, $field, $rule);
// $data 分表字段的数据
// $field 分表字段的名称
// $rule 分表规则</code></pre>
<p class="calibre10"><strong class="calibre12">注意：不要使用任何 SQL 语句中会出现的关键字当表名、字段名，例如 order 等。会导致数据模型拼装 SQL 语句语法错误。</strong></p>
<p class="calibre10">partition 方法用法如下：</p>
<pre class="calibre21"><code class="calibre22">// 用于写入
$data = [
    'user_id'   =&gt; 110,
    'user_name' =&gt; 'think'
];

$rule = [
    'type' =&gt; 'mod', // 分表方式
    'num'  =&gt; 10     // 分表数量
];

Db::name('log')
    -&gt;partition(['user_id' =&gt; 110], "user_id", $rule)
    -&gt;insert($data);

// 用于查询
Db::name('log')
    -&gt;partition(['user_id' =&gt; 110], "user_id", $rule)
    -&gt;where(['user_id' =&gt; 110])
    -&gt;select();</code></pre>
</div>
	
</body></html>
