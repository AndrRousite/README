<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>修改器</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_100">修改器</h1>
<div class="book-content">
    <h2 id="%E4%BF%AE%E6%94%B9%E5%99%A8" class="calibre15">修改器</h2>
<p class="calibre10">修改器的作用是可以在数据赋值的时候自动进行转换处理，例如：</p>
<pre class="calibre21"><code class="calibre22">class User extends Model 
{
    public function setNameAttr($value)
    {
        return strtolower($value);
    }
}</code></pre>
<p class="calibre10">如下代码实际保存到数据库中的时候会转为小写</p>
<pre class="calibre21"><code class="calibre22">$user = new User();
$user-&gt;name = 'THINKPHP';
$user-&gt;save();
echo $user-&gt;name; // thinkphp</code></pre>
<p class="calibre10">也可以进行序列化字段的组装：</p>
<pre class="calibre21"><code class="calibre22">class User extends Model 
{
    public function setNameAttr($value,$data)
    {
        return serialize($data);
    }
}</code></pre>
<blockquote class="calibre5">
<p class="calibre14">修改器方法的第二个参数会自动传入当前的所有数据数组。</p>
</blockquote>
<h2 id="%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9" class="calibre15">批量修改</h2>
<p class="calibre10">除了赋值的方式可以触发修改器外，还可以用下面的方法批量触发修改器：</p>
<pre class="calibre21"><code class="calibre22">$user = new User();
$data['name'] = 'THINKPHP';
$data['email'] = 'thinkphp@qq.com';
$user-&gt;data($data, true);
$user-&gt;save();
echo $user-&gt;name; // thinkphp</code></pre>
<p class="calibre10">或者直接使用save方法触发，例如：</p>
<pre class="calibre21"><code class="calibre22">$user = new User();
$data['name'] = 'THINKPHP';
$data['email'] = 'thinkphp@qq.com';
$user-&gt;save($data);
echo $user-&gt;name; // thinkphp</code></pre>
</div>
	
</body></html>
