<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>生成数据表字段缓存</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_213">生成数据表字段缓存</h1>
<div class="book-content">
    <h2 id="%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%AD%97%E6%AE%B5%E7%BC%93%E5%AD%98%60optimize%3Aschema%60" class="calibre15">生成数据表字段缓存<code class="calibre7">optimize:schema</code></h2>
<blockquote class="success">
<h4 id="%E7%89%88%E6%9C%AC%E8%A6%81%E6%B1%82%60v5.0.1%60-1" class="calibre6">版本要求<code class="calibre7">V5.0.1</code></h4>
</blockquote>
<p class="calibre10">可以通过生成数据表字段信息缓存，提升数据库查询的性能，避免多余的查询。命令如下：</p>
<pre class="calibre21"><code class="calibre22">php think optimize:schema</code></pre>
<p class="calibre10">会自动生成当前数据库配置文件中定义的数据表字段缓存，也可以指定数据库生成字段缓存（必须有用户权限），例如，下面指定生成demo数据库下面的所有数据表的字段缓存信息。</p>
<pre class="calibre21"><code class="calibre22">php think optimize:schema --db demo</code></pre>
<p class="calibre10">执行后会自动在<code class="calibre7">runtime/schema</code>目录下面按照数据表生成字段缓存文件。</p>
<p class="calibre10">如果你的应用使用了不同的数据库连接，可以根据模块来生成，如下：</p>
<pre class="calibre21"><code class="calibre22">php think optimize:schema --module index</code></pre>
<p class="calibre10">会读取index模块的模型来生成数据表字段缓存。</p>
<blockquote class="danger">
<p class="calibre14">没有继承think\Model类的模型和抽象类不会生成。</p>
</blockquote>
<p class="calibre10">更新数据表字段缓存也是同样的方式，每次执行都会重新生成缓存。如果需要单独更新某个数据表的缓存，可以使用：</p>
<pre class="calibre21"><code class="calibre22">php think optimize:schema --table think_user</code></pre>
<p class="calibre10">支持指定数据库名称</p>
<pre class="calibre21"><code class="calibre22">php think optimize:schema --table demo.think_user</code></pre>
</div>
	
</body></html>
