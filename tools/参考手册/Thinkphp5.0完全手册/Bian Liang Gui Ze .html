<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
  <head>
    <title>变量规则</title>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
        <h1 class="book-title" id="calibre_toc_29">变量规则</h1>
<div class="book-content">
    <h2 id="%E5%8F%98%E9%87%8F%E8%A7%84%E5%88%99" class="calibre15">变量规则</h2>
<p class="calibre10">ThinkPHP5.0支持在规则路由中为变量用正则的方式指定变量规则，弥补了动态变量无法限制具体的类型问题，并且支持全局规则设置。使用方式如下：</p>
<h3 id="%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E8%A7%84%E5%88%99" class="calibre17">全局变量规则</h3>
<p class="calibre10">设置全局变量规则，全部路由有效：</p>
<pre class="calibre21"><code class="calibre22">// 设置name变量规则（采用正则定义）
Route::pattern('name','\w+');
// 支持批量添加
Route::pattern([
    'name'  =&gt;  '\w+',
    'id'    =&gt;  '\d+',
]);</code></pre>
<h3 id="%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E8%A7%84%E5%88%99" class="calibre17">局部变量规则</h3>
<p class="calibre10">局部变量规则，仅在当前路由有效：</p>
<pre class="calibre21"><code class="calibre22">// 定义GET请求路由规则 并设置name变量规则
Route::get('new/:name','News/read',[],['name'=&gt;'\w+']);</code></pre>
<p class="calibre10">如果一个变量同时定义了全局规则和局部规则，局部规则会覆盖全局变量的定义。</p>
<h3 id="%E5%AE%8C%E6%95%B4url%E8%A7%84%E5%88%99" class="calibre17">完整URL规则</h3>
<p class="calibre10">如果要对整个URL进行规则检查，可以进行<code class="calibre7">__url__</code> 变量规则，例如：</p>
<pre class="calibre21"><code class="calibre22">// 定义GET请求路由规则 并设置完整URL变量规则
Route::get('new/:id','News/read',[],['__url__'=&gt;'new\/\w+$']);</code></pre>
</div>
	
</body></html>
